<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <title>Praktikum 2022 // GABERNIG Thomas</title>
  <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />
  <script src="https://api.mapbox.com/mapbox-gl-js/v2.7.0/mapbox-gl.js"></script>
  <link href="https://api.mapbox.com/mapbox-gl-js/v2.7.0/mapbox-gl.css" rel="stylesheet" />
  <style>
    body {
      margin: 0;
      padding: 0;
    }

    #map {
      position: absolute;
      top: 0;
      bottom: 0;
      width: 100%;
    }
  </style>
</head>

<body>
  <style>
    .popup {
      text-align: center;
    }

    .popup .slideshow .image {
      display: none;
    }

    .popup .slideshow .image.active {
      display: block;
    }

    .popup .slideshow img {
      width: 100%;
    }

    .popup .slideshow .caption {
      background: #eee;
      padding: 10px;
    }

    .popup .cycle {
      padding: 10px 0 20px;
    }

    .popup .cycle a.prev {
      float: left;
    }

    .popup .cycle a.next {
      float: right;
    }
  </style>

  <div id='map'></div>

  <!-- jQuery is required for this example. -->
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
  <script>
    mapboxgl.accessToken = 'pk.eyJ1IjoibWFsLXdvb2QiLCJhIjoiY2oyZ2t2em50MDAyMzJ3cnltMDFhb2NzdiJ9.X-D4Wvo5E5QxeP7K_I3O8w';
    var map = new mapboxgl.Map({
      container: 'map', // container id
      style: 'mapbox://styles/thogab/cl84kcv32006414p4pr3d1xyt', // style URL    mapbox://styles/mapbox/light-v10
      center: [8.59374, 46.89937], // starting position [lng, lat]
      zoom: 7.5 // starting zoom
    });

    var geojsonFeatures = 
    {
      type: 'FeatureCollection',
      features: 
      [{
        type: 'Feature',
        "geometry": { "type": "Point", "coordinates": [8.682824, 47.419917] },
        "properties": {
          'title': 'Effretikon',
          'marker-color': '#3c4e5a',
          'marker-symbol': 'monument',
          'marker-size': 'medium',

          // Store the image url and caption in an array.
          'images': [
            ['https://github.com/thogab/rsrg_internship_2022_gabernig.github.com/blob/main/pictures/effretikon_001.jpg?raw=true', ''],
          ]
        }
      }, 
      {
        type: 'Feature',
        "geometry": { "type": "Point", "coordinates": [8.55868, 47.04872] },
        "properties": {
          'title': 'Arth-Goldau',
          'marker-color': '#3c4e5a',
          'marker-symbol': 'city',
          'marker-size': 'large',
          'images': [
            ['https://github.com/thogab/rsrg_internship_2022_gabernig.github.com/blob/main/pictures/arth_goldau_001.jpg?raw=true', ''],
            ['https://github.com/thogab/rsrg_internship_2022_gabernig.github.com/blob/main/pictures/arth_goldau_002.jpg?raw=true', '.'],
            ['https://github.com/thogab/rsrg_internship_2022_gabernig.github.com/blob/main/pictures/arth_goldau_003.jpg?raw=true', '']
          ]

        }
        
      },
      {
        type: 'Feature',
        "geometry": { "type": "Point", "coordinates": [8.67377, 47.23111] },
        "properties": {
          'title': 'Wädenswill',
          'marker-color': '#3c4e5a',
          'marker-symbol': 'monument',
          'marker-size': 'medium',

          // Store the image url and caption in an array.
          'images': [
            ['https://github.com/thogab/rsrg_internship_2022_gabernig.github.com/blob/main/pictures/waedenswil_001.jpg?raw=true', ''],
            ['https://github.com/thogab/rsrg_internship_2022_gabernig.github.com/blob/main/pictures/waedenswil_002.jpg?raw=true', ''],
            ['https://github.com/thogab/rsrg_internship_2022_gabernig.github.com/blob/main/pictures/waedenswil_003.jpg?raw=true', '']
          ]
        }
      },
      {
        type: 'Feature',
        "geometry": { "type": "Point", "coordinates": [8.493129, 47.394672] },
        "properties": {
          'title': 'Zürich',
          'marker-color': '#3c4e5a',
          'marker-symbol': 'monument',
          'marker-size': 'medium',

          // Store the image url and caption in an array.
          'images': [
            ['https://github.com/thogab/rsrg_internship_2022_gabernig.github.com/blob/main/pictures/zuerich_001.jpg?raw=true', ''],
          ]
        }
      },
      {
        type: 'Feature',
        "geometry": { "type": "Point", "coordinates": [8.765059, 47.511305] },
        "properties": {
          'title': 'Oberwinterthur',
          'marker-color': '#3c4e5a',
          'marker-symbol': 'monument',
          'marker-size': 'medium',

          // Store the image url and caption in an array.
          'images': [
            ['https://github.com/thogab/rsrg_internship_2022_gabernig.github.com/blob/main/pictures/oberwinterthur_001.jpg?raw=true', ''],
            ['https://github.com/thogab/rsrg_internship_2022_gabernig.github.com/blob/main/pictures/oberwinterthur_002.jpg?raw=true', ''],
            ['https://github.com/thogab/rsrg_internship_2022_gabernig.github.com/blob/main/pictures/oberwinterthur_003.jpg?raw=true', ''],
            ['https://github.com/thogab/rsrg_internship_2022_gabernig.github.com/blob/main/pictures/oberwinterthur_004.jpg?raw=true', '']
          ]
        }
      },
      {
        type: 'Feature',
        "geometry": { "type": "Point", "coordinates": [7.664659, 47.533198] },
        "properties": {
          'title': 'Basel',
          'marker-color': '#3c4e5a',
          'marker-symbol': 'monument',
          'marker-size': 'medium',

          // Store the image url and caption in an array.
          'images': [
            ['https://github.com/thogab/rsrg_internship_2022_gabernig.github.com/blob/main/pictures/basel_001.jpg?raw=true', ''],
            ['https://github.com/thogab/rsrg_internship_2022_gabernig.github.com/blob/main/pictures/basel_002.jpg?raw=true', ''],
            ['https://github.com/thogab/rsrg_internship_2022_gabernig.github.com/blob/main/pictures/basel_003.jpg?raw=true', '']
          ]
        }
      },
      {
        type: 'Feature',
        "geometry": { "type": "Point", "coordinates": [9.29256, 47.11373] },
        "properties": {
          'title': 'Walenstadt',
          'marker-color': '#3c4e5a',
          'marker-symbol': 'monument',
          'marker-size': 'medium',

          // Store the image url and caption in an array.
          'images': [
            ['https://github.com/thogab/rsrg_internship_2022_gabernig.github.com/blob/main/pictures/bommerstein_001.jpg?raw=true', ''],
            ['https://github.com/thogab/rsrg_internship_2022_gabernig.github.com/blob/main/pictures/bommerstein_002.jpg?raw=true', ''],
            ['https://github.com/thogab/rsrg_internship_2022_gabernig.github.com/blob/main/pictures/bommerstein_003.jpg?raw=true', ''],
          ]
        }
      },
      {
        type: 'Feature',
        "geometry": { "type": "Point", "coordinates": [9.53682, 46.95998] },
        "properties": {
          'title': 'Landquart',
          'marker-color': '#3c4e5a',
          'marker-symbol': 'monument',
          'marker-size': 'medium',

          // Store the image url and caption in an array.
          'images': [
            ['https://github.com/thogab/rsrg_internship_2022_gabernig.github.com/blob/main/pictures/landquart_001.jpg?raw=true', ''],
            ['https://github.com/thogab/rsrg_internship_2022_gabernig.github.com/blob/main/pictures/landquart_002.jpg?raw=true', ''],
          ]
        }
      },
      {
        type: 'Feature',
        "geometry": { "type": "Point", "coordinates": [7.83107, 46.21557] },
        "properties": {
          'title': 'Embd',
          'marker-color': '#3c4e5a',
          'marker-symbol': 'monument',
          'marker-size': 'medium',

          // Store the image url and caption in an array.
          'images': [
            ['https://github.com/thogab/rsrg_internship_2022_gabernig.github.com/blob/main/pictures/embd_001.jpg?raw=true', ''],
            ['https://github.com/thogab/rsrg_internship_2022_gabernig.github.com/blob/main/pictures/embd_002.jpg?raw=true', ''],
          ]
        }
      },
      {
        type: 'Feature',
        "geometry": { "type": "Point", "coordinates": [7.98011, 46.3184] },
        "properties": {
          'title': 'Brig',
          'marker-color': '#3c4e5a',
          'marker-symbol': 'monument',
          'marker-size': 'medium',

          // Store the image url and caption in an array.
          'images': [
            ['https://github.com/thogab/rsrg_internship_2022_gabernig.github.com/blob/main/pictures/brig_001.jpg?raw=true', ''],
            ['https://github.com/thogab/rsrg_internship_2022_gabernig.github.com/blob/main/pictures/brig_002.jpg?raw=true', ''],
            ['https://github.com/thogab/rsrg_internship_2022_gabernig.github.com/blob/main/pictures/brig_003.jpg?raw=true', '']
          ]
        }
      },
      {
        type: 'Feature',
        "geometry": { "type": "Point", "coordinates": [9.70431, 46.80473] },
        "properties": {
          'title': 'Litzirüti',
          'marker-color': '#3c4e5a',
          'marker-symbol': 'monument',
          'marker-size': 'medium',

          // Store the image url and caption in an array.
          'images': [
            ['https://github.com/thogab/rsrg_internship_2022_gabernig.github.com/blob/main/pictures/litzirueti_001.jpg?raw=true', ''],
            ['https://github.com/thogab/rsrg_internship_2022_gabernig.github.com/blob/main/pictures/litzirueti_002.jpg?raw=true', ''],
            ['https://github.com/thogab/rsrg_internship_2022_gabernig.github.com/blob/main/pictures/litzirueti_003.jpg?raw=true', '']
      
          ]
        }
      },
      {
        type: 'Feature',
        "geometry": { "type": "Point", "coordinates": [9.59833, 46.83539] },
        "properties": {
          'title': 'Untersax',
          'marker-color': '#3c4e5a',
          'marker-symbol': 'monument',
          'marker-size': 'medium',

          // Store the image url and caption in an array.
          'images': [
            ['https://github.com/thogab/rsrg_internship_2022_gabernig.github.com/blob/main/pictures/untersax_001.jpg?raw=true', ''],
            ['https://github.com/thogab/rsrg_internship_2022_gabernig.github.com/blob/main/pictures/untersax_002.jpg?raw=true', ''],
            ['https://github.com/thogab/rsrg_internship_2022_gabernig.github.com/blob/main/pictures/untersax_003.jpg?raw=true', '']
          ]
        }
      },
      {
        type: 'Feature',
        "geometry": { "type": "Point", "coordinates": [9.89442, 46.85683] },
        "properties": {
          'title': 'Klosters',
          'marker-color': '#3c4e5a',
          'marker-symbol': 'monument',
          'marker-size': 'medium',

          // Store the image url and caption in an array.
          'images': [
            ['https://github.com/thogab/rsrg_internship_2022_gabernig.github.com/blob/main/pictures/klosters_001.jpg?raw=true', ''],
            ['https://github.com/thogab/rsrg_internship_2022_gabernig.github.com/blob/main/pictures/klosters_002.jpg?raw=true', '']
          ]
        }
      },
      {
        type: 'Feature',
        "geometry": { "type": "Point", "coordinates": [9.06291, 46.7638] },
        "properties": {
          'title': 'Tavanasas',
          'marker-color': '#3c4e5a',
          'marker-symbol': 'monument',
          'marker-size': 'medium',

          // Store the image url and caption in an array.
          'images': [
            ['https://github.com/thogab/rsrg_internship_2022_gabernig.github.com/blob/main/pictures/tavanasas_001.jpg?raw=true', ''],
            ['https://github.com/thogab/rsrg_internship_2022_gabernig.github.com/blob/main/pictures/tavanasas_002.jpg?raw=true', ''],
            ['https://github.com/thogab/rsrg_internship_2022_gabernig.github.com/blob/main/pictures/tavanasas_003.jpg?raw=true', '']
          ]
        }
      },

      {
        type: 'Feature',
        "geometry": { "type": "Point", "coordinates": [8.246282, 47.356888] },
        "properties": {
          'title': 'Villmergen',
          'marker-color': '#3c4e5a',
          'marker-symbol': 'monument',
          'marker-size': 'medium',

          // Store the image url and caption in an array.
          'images': [
            ['https://github.com/thogab/rsrg_internship_2022_gabernig.github.com/blob/main/pictures/villmergen_001.jpg?raw=true', '']
          ]
        }
      },
      {
        type: 'Feature',
        "geometry": { "type": "Point", "coordinates": [8.506773, 47.589159] },
        "properties": {
          'title': 'Hüntwang',
          'marker-color': '#3c4e5a',
          'marker-symbol': 'monument',
          'marker-size': 'medium',

          // Store the image url and caption in an array.
          'images': [
            ['https://github.com/thogab/rsrg_internship_2022_gabernig.github.com/blob/main/pictures/huentwang_001.jpg?raw=true', ''],
            ['https://github.com/thogab/rsrg_internship_2022_gabernig.github.com/blob/main/pictures/huentwang_002.jpg?raw=true', ''],
            ['https://github.com/thogab/rsrg_internship_2022_gabernig.github.com/blob/main/pictures/huentwang_003.jpg?raw=true', '']
          ]
        }
      },
      {
        type: 'Feature',
        "geometry": { "type": "Point", "coordinates": [8.03505, 47.54867] },
        "properties": {
          'title': 'Kaisten',
          'marker-color': '#3c4e5a',
          'marker-symbol': 'monument',
          'marker-size': 'medium',

          // Store the image url and caption in an array.
          'images': [
            ['https://github.com/thogab/rsrg_internship_2022_gabernig.github.com/blob/main/pictures/kaisten_001.jpg?raw=true', ''],
            ['https://github.com/thogab/rsrg_internship_2022_gabernig.github.com/blob/main/pictures/kaisten_002.jpg?raw=true', '']
          ]
        }
      },
      {
        type: 'Feature',
        "geometry": { "type": "Point", "coordinates": [8.454946, 47.101621] },
        "properties": {
          'title': 'Immensee',
          'marker-color': '#3c4e5a',
          'marker-symbol': 'monument',
          'marker-size': 'medium',

          // Store the image url and caption in an array.
          'images': [
            ['https://github.com/thogab/rsrg_internship_2022_gabernig.github.com/blob/main/pictures/immensee_001.jpg?raw=true', ''],
            ['https://github.com/thogab/rsrg_internship_2022_gabernig.github.com/blob/main/pictures/immensee_002.jpg?raw=true', ''],
            ['https://github.com/thogab/rsrg_internship_2022_gabernig.github.com/blob/main/pictures/immensee_003.jpg?raw=true', '']
          ]
        }
      }
    ] // ] bleibt davor , und dann einfügen
    }; // bleibt

    map.on('load', function () {
      geojsonFeatures.features.forEach(function (marker) {

        var el = document.createElement('div');
        el.className = 'marker';
        el.style.backgroundImage = 'url(https://drive.google.com/uc?export=view&id=11hMFT0Mv9chzOyhsR5pUQdGWPEnh6UDE)'; // marker bild
        el.style.width = 15 + 'px';
        el.style.height = 15 + 'px';

        var images = marker.properties.images
        var slideshowContent = ""

        for (var i = 0; i < images.length; i++) {
          var img = images[i];

          slideshowContent += '<div class="image' + (i === 0 ? ' active' : '') + '">' +
            '<img src="' + img[0] + '" />' +
            '<div class="caption">' + img[1] + '</div>' +
            '</div>';
        }

        var popupContent = '<div id="' + marker.properties.id + '" class="popup">' +
          '<h2>' + marker.properties.title + '</h2>' +
          '<div class="slideshow">' +
          slideshowContent +
          '</div>' +
          '<div class="cycle">' +
          '<a href="#" class="prev">&laquo;</a>' + //geändert
          '<a href="#" class="next"> &raquo;</a>' + // geändert
          '</div>'
        '</div>';

        // create the popup
        var popup = new mapboxgl.Popup({ offset: 25 }).setHTML(popupContent)

        new mapboxgl.Marker(el)
          .setLngLat(marker.geometry.coordinates)
          .setPopup(popup)
          .addTo(map);
      })
    })

    $('#map').on('click', '.popup .cycle a', function () {
      var $slideshow = $('.slideshow'),
        $newSlide;

      if ($(this).hasClass('prev')) {
        $newSlide = $slideshow.find('.active').prev();
        if ($newSlide.index() < 0) {
          $newSlide = $('.image').last();
        }
      } else {
        $newSlide = $slideshow.find('.active').next();
        if ($newSlide.index() < 0) {
          $newSlide = $('.image').first();
        }
      }

      $slideshow.find('.active').removeClass('active').hide();
      $newSlide.addClass('active').show();
      return false;
    });

  </script>
</body>

</html>
